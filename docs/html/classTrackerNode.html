<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F1Trail: TrackerNode Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">F1Trail
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classTrackerNode-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">TrackerNode Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Node for tracking an object and estimating its future state.  
 <a href="classTrackerNode.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="tracker_8hpp_source.html">tracker.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for TrackerNode:</div>
<div class="dyncontent">
<div class="center"><img src="classTrackerNode__inherit__graph.png" border="0" usemap="#aTrackerNode_inherit__map" alt="Inheritance graph"/></div>
<map name="aTrackerNode_inherit__map" id="aTrackerNode_inherit__map">
<area shape="rect" title="Node for tracking an object and estimating its future state." alt="" coords="5,80,108,107"/>
<area shape="rect" title=" " alt="" coords="5,5,108,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for TrackerNode:</div>
<div class="dyncontent">
<div class="center"><img src="classTrackerNode__coll__graph.png" border="0" usemap="#aTrackerNode_coll__map" alt="Collaboration graph"/></div>
<map name="aTrackerNode_coll__map" id="aTrackerNode_coll__map">
<area shape="rect" title="Node for tracking an object and estimating its future state." alt="" coords="69,95,172,121"/>
<area shape="rect" title=" " alt="" coords="5,5,108,32"/>
<area shape="rect" href="classKalmanFilter.html" title="Implements a Kalman Filter for estimating and tracking the state of an object." alt="" coords="132,5,237,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2cb302b50196da702e87b8f88eeac659"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#a2cb302b50196da702e87b8f88eeac659">TrackerNode</a> ()</td></tr>
<tr class="memdesc:a2cb302b50196da702e87b8f88eeac659"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new <a class="el" href="classTrackerNode.html" title="Node for tracking an object and estimating its future state.">TrackerNode</a> object.  <a href="classTrackerNode.html#a2cb302b50196da702e87b8f88eeac659">More...</a><br /></td></tr>
<tr class="separator:a2cb302b50196da702e87b8f88eeac659"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ab4a9374f8eecf5bc1d88a0fb8c636c9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#ab4a9374f8eecf5bc1d88a0fb8c636c9f">target_callback</a> (const geometry_msgs::msg::PointStamped::SharedPtr target_msg)</td></tr>
<tr class="memdesc:ab4a9374f8eecf5bc1d88a0fb8c636c9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for target location incoming from the vision node.  <a href="classTrackerNode.html#ab4a9374f8eecf5bc1d88a0fb8c636c9f">More...</a><br /></td></tr>
<tr class="separator:ab4a9374f8eecf5bc1d88a0fb8c636c9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa42feb52d1fcc9485be33985d74d723f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#aa42feb52d1fcc9485be33985d74d723f">centroids_callback</a> (const geometry_msgs::msg::PoseArray::SharedPtr clusters_msg)</td></tr>
<tr class="memdesc:aa42feb52d1fcc9485be33985d74d723f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for clusters centroids incoming from the clustering node.  <a href="classTrackerNode.html#aa42feb52d1fcc9485be33985d74d723f">More...</a><br /></td></tr>
<tr class="separator:aa42feb52d1fcc9485be33985d74d723f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92571955e9a154a7887ca5446eeca00a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#a92571955e9a154a7887ca5446eeca00a">trackerCore</a> (bool sensorType)</td></tr>
<tr class="memdesc:a92571955e9a154a7887ca5446eeca00a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the logic of the tracking node.  <a href="classTrackerNode.html#a92571955e9a154a7887ca5446eeca00a">More...</a><br /></td></tr>
<tr class="separator:a92571955e9a154a7887ca5446eeca00a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e1b8c26f38831a9fef8d50d318edeb4"><td class="memItemLeft" align="right" valign="top">Eigen::Vector3d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#a9e1b8c26f38831a9fef8d50d318edeb4">sensorFusion</a> ()</td></tr>
<tr class="memdesc:a9e1b8c26f38831a9fef8d50d318edeb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs sensor fusion between vision and clustering nodes messages.  <a href="classTrackerNode.html#a9e1b8c26f38831a9fef8d50d318edeb4">More...</a><br /></td></tr>
<tr class="separator:a9e1b8c26f38831a9fef8d50d318edeb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a705e4428a6344952046d8dba9632a4f3"><td class="memItemLeft" align="right" valign="top">Eigen::VectorXd&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#a705e4428a6344952046d8dba9632a4f3">pointToEigen</a> (const geometry_msgs::msg::PointStamped &amp;pt)</td></tr>
<tr class="memdesc:a705e4428a6344952046d8dba9632a4f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a PointStamped message into an Eigen::VectorXd point.  <a href="classTrackerNode.html#a705e4428a6344952046d8dba9632a4f3">More...</a><br /></td></tr>
<tr class="separator:a705e4428a6344952046d8dba9632a4f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83429d41243b75e94cc0cfccb3de1ab5"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Eigen::VectorXd &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#a83429d41243b75e94cc0cfccb3de1ab5">poseArrayToEigen</a> (const geometry_msgs::msg::PoseArray &amp;centroids)</td></tr>
<tr class="memdesc:a83429d41243b75e94cc0cfccb3de1ab5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a PoseArray message into a vector of Eigen::VectorXd points.  <a href="classTrackerNode.html#a83429d41243b75e94cc0cfccb3de1ab5">More...</a><br /></td></tr>
<tr class="separator:a83429d41243b75e94cc0cfccb3de1ab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac14569a55ed9ccf81704c5a7ee3d53bc"><td class="memItemLeft" align="right" valign="top">rclcpp::Subscription&lt; geometry_msgs::msg::PointStamped &gt;::SharedPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#ac14569a55ed9ccf81704c5a7ee3d53bc">subTargetLoc_</a></td></tr>
<tr class="separator:ac14569a55ed9ccf81704c5a7ee3d53bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af388c9e9743190433167c69187d7c990"><td class="memItemLeft" align="right" valign="top">rclcpp::Subscription&lt; geometry_msgs::msg::PoseArray &gt;::SharedPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#af388c9e9743190433167c69187d7c990">subClusterCentroids_</a></td></tr>
<tr class="separator:af388c9e9743190433167c69187d7c990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0771929ba2744491db1fb7d5e7512c7"><td class="memItemLeft" align="right" valign="top">rclcpp::Publisher&lt; geometry_msgs::msg::PointStamped &gt;::SharedPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#ae0771929ba2744491db1fb7d5e7512c7">pub_</a></td></tr>
<tr class="separator:ae0771929ba2744491db1fb7d5e7512c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a903977c4e34a588ea9a04572c63d0e01"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classKalmanFilter.html">KalmanFilter</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#a903977c4e34a588ea9a04572c63d0e01">kalman_</a></td></tr>
<tr class="separator:a903977c4e34a588ea9a04572c63d0e01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7411fc2912bc7c07bca9c28bf02bfa5c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#a7411fc2912bc7c07bca9c28bf02bfa5c">isInitialized_</a></td></tr>
<tr class="separator:a7411fc2912bc7c07bca9c28bf02bfa5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac882e752e7337a0ffebcf915377813ee"><td class="memItemLeft" align="right" valign="top">rclcpp::Time&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#ac882e752e7337a0ffebcf915377813ee">previousTime_</a></td></tr>
<tr class="separator:ac882e752e7337a0ffebcf915377813ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bd329f33c667a08cf8bb2c7d011f167"><td class="memItemLeft" align="right" valign="top">Eigen::VectorXd&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#a9bd329f33c667a08cf8bb2c7d011f167">currAlpha_</a></td></tr>
<tr class="separator:a9bd329f33c667a08cf8bb2c7d011f167"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a341bb06634770d5d9dfd3ea32659b4ec"><td class="memItemLeft" align="right" valign="top">Eigen::VectorXd&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#a341bb06634770d5d9dfd3ea32659b4ec">beta_</a></td></tr>
<tr class="separator:a341bb06634770d5d9dfd3ea32659b4ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7504a3f86e046603cfdc475b06f68542"><td class="memItemLeft" align="right" valign="top">Eigen::VectorXd&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#a7504a3f86e046603cfdc475b06f68542">betaPred_</a></td></tr>
<tr class="separator:a7504a3f86e046603cfdc475b06f68542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc95f5f7512a40c2c2e5ca057c7cf50e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Eigen::VectorXd &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#adc95f5f7512a40c2c2e5ca057c7cf50e">centroids_</a></td></tr>
<tr class="separator:adc95f5f7512a40c2c2e5ca057c7cf50e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0925d276cc149ace6f127255d0694dc7"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; tf2_ros::Buffer &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#a0925d276cc149ace6f127255d0694dc7">tf_buffer_</a></td></tr>
<tr class="separator:a0925d276cc149ace6f127255d0694dc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aef4bd549a16d067b34ba0bcf054ae1"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; tf2_ros::TransformListener &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTrackerNode.html#a4aef4bd549a16d067b34ba0bcf054ae1">tf_listener_</a></td></tr>
<tr class="separator:a4aef4bd549a16d067b34ba0bcf054ae1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Node for tracking an object and estimating its future state. </p>
<p >The node receives messages containing a target location and cluster centroids, performs sensor fusion to identify the object of interest, and tracks it over time using a Kalman Filter to predict its future state. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2cb302b50196da702e87b8f88eeac659" name="a2cb302b50196da702e87b8f88eeac659"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cb302b50196da702e87b8f88eeac659">&#9670;&nbsp;</a></span>TrackerNode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TrackerNode::TrackerNode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new <a class="el" href="classTrackerNode.html" title="Node for tracking an object and estimating its future state.">TrackerNode</a> object. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa42feb52d1fcc9485be33985d74d723f" name="aa42feb52d1fcc9485be33985d74d723f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa42feb52d1fcc9485be33985d74d723f">&#9670;&nbsp;</a></span>centroids_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TrackerNode::centroids_callback </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::msg::PoseArray::SharedPtr&#160;</td>
          <td class="paramname"><em>clusters_msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback function for clusters centroids incoming from the clustering node. </p>
<p >Transforms the incoming clusters centroids to the "base_link" frame using the tf2 buffer. If the transformation is successful, the target is stored. If the received centroids are the first message received from this node, there is no target location available yet, thus sensor fusion cannot be applied, the function handle this edge case and returns without performing sensor fusion and tracking. Otherwise, the <code>trackerCore</code> function is called to perform sensor fusion and tracking.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">clusters_msg</td><td>Array of poses containing the clusters centroids. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a705e4428a6344952046d8dba9632a4f3" name="a705e4428a6344952046d8dba9632a4f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a705e4428a6344952046d8dba9632a4f3">&#9670;&nbsp;</a></span>pointToEigen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::VectorXd TrackerNode::pointToEigen </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::msg::PointStamped &amp;&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts a PointStamped message into an Eigen::VectorXd point. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pt</td><td>PointStamped message.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Eigen::VectorXd The point converted into an Eigen vector. </dd></dl>

</div>
</div>
<a id="a83429d41243b75e94cc0cfccb3de1ab5" name="a83429d41243b75e94cc0cfccb3de1ab5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83429d41243b75e94cc0cfccb3de1ab5">&#9670;&nbsp;</a></span>poseArrayToEigen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; Eigen::VectorXd &gt; TrackerNode::poseArrayToEigen </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::msg::PoseArray &amp;&#160;</td>
          <td class="paramname"><em>centroids</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts a PoseArray message into a vector of Eigen::VectorXd points. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">centroids</td><td>PoseArray message.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::vector&lt;Eigen::VectorXd&gt; A std vector of centroids converted into Eigen vectors. </dd></dl>

</div>
</div>
<a id="a9e1b8c26f38831a9fef8d50d318edeb4" name="a9e1b8c26f38831a9fef8d50d318edeb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e1b8c26f38831a9fef8d50d318edeb4">&#9670;&nbsp;</a></span>sensorFusion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::Vector3d TrackerNode::sensorFusion </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs sensor fusion between vision and clustering nodes messages. </p>
<p >The algorithm peforms sensor fusion by creating a minimum problem. The target location received from the vision node is used as a reference to find the correct centroid in the vector of centroids received from the clustering node. By minimizing the Euclidean distance between the target location and the centroids, the right cluster is selected as the target object.</p>
<dl class="section return"><dt>Returns</dt><dd>Eigen::Vector3d Centroid (x, y, z) that minimizes the distances with the target location. </dd></dl>

</div>
</div>
<a id="ab4a9374f8eecf5bc1d88a0fb8c636c9f" name="ab4a9374f8eecf5bc1d88a0fb8c636c9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4a9374f8eecf5bc1d88a0fb8c636c9f">&#9670;&nbsp;</a></span>target_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TrackerNode::target_callback </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::msg::PointStamped::SharedPtr&#160;</td>
          <td class="paramname"><em>target_msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback function for target location incoming from the vision node. </p>
<p >Transforms the incoming target position to the "base_link" frame using the tf2 buffer. If the transformation is successful, the target is stored. If the received target location is the first message received from this node, there are no centroids available yet, thus sensor fusion cannot be applied, the function handle this edge case and returns without performing sensor fusion and tracking. Otherwise, the <code>trackerCore</code> function is called to perform sensor fusion and tracking.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">target_msg</td><td>Point (x, y, z) containing the target position. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a92571955e9a154a7887ca5446eeca00a" name="a92571955e9a154a7887ca5446eeca00a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92571955e9a154a7887ca5446eeca00a">&#9670;&nbsp;</a></span>trackerCore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TrackerNode::trackerCore </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>sensorType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes the logic of the tracking node. </p>
<p >This function performs sensor fusion between the target location and the centroids, applies the Kalman Filter for object tracking, and predicts the future position of the tracked object. The tracked position is then published as a message. This function is called from both sensors callback, thus is important to specify the caller, True for the camera and false for the lidar.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sensorType</td><td>True for Camera measurement, false for Lidar measurement. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a341bb06634770d5d9dfd3ea32659b4ec" name="a341bb06634770d5d9dfd3ea32659b4ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a341bb06634770d5d9dfd3ea32659b4ec">&#9670;&nbsp;</a></span>beta_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::VectorXd TrackerNode::beta_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Input of the Kalman Filter. </p>

</div>
</div>
<a id="a7504a3f86e046603cfdc475b06f68542" name="a7504a3f86e046603cfdc475b06f68542"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7504a3f86e046603cfdc475b06f68542">&#9670;&nbsp;</a></span>betaPred_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::VectorXd TrackerNode::betaPred_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Output of the Kalman Filter (tracked object position). </p>

</div>
</div>
<a id="adc95f5f7512a40c2c2e5ca057c7cf50e" name="adc95f5f7512a40c2c2e5ca057c7cf50e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc95f5f7512a40c2c2e5ca057c7cf50e">&#9670;&nbsp;</a></span>centroids_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Eigen::VectorXd&gt; TrackerNode::centroids_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Vector of centroids (x, y, z) used in sensor fusion. </p>

</div>
</div>
<a id="a9bd329f33c667a08cf8bb2c7d011f167" name="a9bd329f33c667a08cf8bb2c7d011f167"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bd329f33c667a08cf8bb2c7d011f167">&#9670;&nbsp;</a></span>currAlpha_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::VectorXd TrackerNode::currAlpha_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Current target location used to perform sensor fusion. </p>

</div>
</div>
<a id="a7411fc2912bc7c07bca9c28bf02bfa5c" name="a7411fc2912bc7c07bca9c28bf02bfa5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7411fc2912bc7c07bca9c28bf02bfa5c">&#9670;&nbsp;</a></span>isInitialized_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool TrackerNode::isInitialized_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Variable used to check for initialization of the tracked object. </p>

</div>
</div>
<a id="a903977c4e34a588ea9a04572c63d0e01" name="a903977c4e34a588ea9a04572c63d0e01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a903977c4e34a588ea9a04572c63d0e01">&#9670;&nbsp;</a></span>kalman_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classKalmanFilter.html">KalmanFilter</a> TrackerNode::kalman_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Kalman Filter object to peform the tracking. </p>

</div>
</div>
<a id="ac882e752e7337a0ffebcf915377813ee" name="ac882e752e7337a0ffebcf915377813ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac882e752e7337a0ffebcf915377813ee">&#9670;&nbsp;</a></span>previousTime_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">rclcpp::Time TrackerNode::previousTime_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Previous timestamp used to update the Kalman Filter matrices. </p>

</div>
</div>
<a id="ae0771929ba2744491db1fb7d5e7512c7" name="ae0771929ba2744491db1fb7d5e7512c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0771929ba2744491db1fb7d5e7512c7">&#9670;&nbsp;</a></span>pub_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">rclcpp::Publisher&lt;geometry_msgs::msg::PointStamped&gt;::SharedPtr TrackerNode::pub_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Publisher of detected target location. </p>

</div>
</div>
<a id="af388c9e9743190433167c69187d7c990" name="af388c9e9743190433167c69187d7c990"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af388c9e9743190433167c69187d7c990">&#9670;&nbsp;</a></span>subClusterCentroids_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">rclcpp::Subscription&lt;geometry_msgs::msg::PoseArray&gt;::SharedPtr TrackerNode::subClusterCentroids_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Subscriber to clusters centroids. </p>

</div>
</div>
<a id="ac14569a55ed9ccf81704c5a7ee3d53bc" name="ac14569a55ed9ccf81704c5a7ee3d53bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac14569a55ed9ccf81704c5a7ee3d53bc">&#9670;&nbsp;</a></span>subTargetLoc_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">rclcpp::Subscription&lt;geometry_msgs::msg::PointStamped&gt;::SharedPtr TrackerNode::subTargetLoc_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Subscriver to target location. </p>

</div>
</div>
<a id="a0925d276cc149ace6f127255d0694dc7" name="a0925d276cc149ace6f127255d0694dc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0925d276cc149ace6f127255d0694dc7">&#9670;&nbsp;</a></span>tf_buffer_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;tf2_ros::Buffer&gt; TrackerNode::tf_buffer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Buffer to get available static transforms. </p>

</div>
</div>
<a id="a4aef4bd549a16d067b34ba0bcf054ae1" name="a4aef4bd549a16d067b34ba0bcf054ae1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4aef4bd549a16d067b34ba0bcf054ae1">&#9670;&nbsp;</a></span>tf_listener_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;tf2_ros::TransformListener&gt; TrackerNode::tf_listener_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Transform listener. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>tracking_proc/include/tracking_proc/<a class="el" href="tracker_8hpp_source.html">tracker.hpp</a></li>
<li>tracking_proc/src/<a class="el" href="tracker_8cpp.html">tracker.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
